C51 COMPILER V9.60.0.0   MAIN                                                              03/25/2022 17:21:48 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Source\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg51.h>
   2          #include "delay.h"
   3          #include "key4X4.h"
   4          #include "lcd1602.h"
   5          
   6          void main(void)
   7          {
   8   1          unsigned char keyValue = 0;    // æŒ‰ä¸‹çš„å­—ç¬¦
   9   1          unsigned char index = 0;       // å½“å‰å…‰æ ‡ä½ç½®
  10   1          unsigned int leftOperand = 0;  // å·¦æ“ä½œæ•°
  11   1          unsigned int rightOperand = 0; // å³æ“ä½œæ•°
  12   1          unsigned char operator= ' ';   // æ“ä½œç¬¦
  13   1          LCD1602_Init();
  14   1          while (1)
  15   1          {
  16   2              /**
  17   2               * ä¸€ä¸ªç®€æ˜“è®¡ç®—å™¨ï¼š
  18   2               *           å·¦æ“ä½œæ•°ï¼ˆçº¯æ•´æ•°ï¼‰+ æ“ä½œç¬¦ï¼ˆ+ã€-ï¼‰+ å³æ“ä½œæ•°ï¼ˆçº¯æ•´æ•°ï¼‰
  19   2               * åŸºæœ¬æ€è·¯ï¼šåªè¦æ˜¯è¡¨è¾¾å¼å­—ç¬¦ï¼ˆæ•°å­—ã€+ã€-ï¼‰ï¼Œé€šé€šè®°å½•ä¿å­˜å¹¶è¾“å‡ºåˆ°ç¬¬
             -ä¸€è¡Œ
  20   2               *           æŒ‰ä¸‹ = çš„æ—¶å€™å¼€å§‹è®¡ç®—ç»“æžœï¼Œå¹¶è¾“å‡ºåˆ°ç¬¬äºŒè¡Œ
  21   2               */
  22   2              keyValue = KeyValue();
  23   2      
  24   2              // å…ˆåˆ¤å®šæœ‰æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹
  25   2              if (keyValue)
  26   2              {
  27   3                  // keyValue âˆˆ {0, 1, 2..., 9} âˆª {+, -}  ï¼ˆæ˜¯è¡¨è¾¾å¼ï¼‰
  28   3                  if (keyValue >= '0' && keyValue <= '9' || keyValue == '+' || keyValue == '-')
  29   3                  {
  30   4      
  31   4                      // å¦‚æžœæ²¡æŒ‰ä¸‹è¿‡æ“ä½œæ•°
  32   4                      if (operator== ' ')
  33   4                      {
  34   5                          // æ˜¯æ•°å­—çš„è¯å°±æ˜¯å·¦æ“ä½œæ•°
  35   5                          if (keyValue >= '0' && keyValue <= '9')
  36   5                          {
  37   6                              // ç®—ä¸€ä¸‹
  38   6                              leftOperand = leftOperand * 10 + keyValue - '0';
  39   6                          }
  40   5                          // å¦‚æžœæ˜¯æ“ä½œç¬¦ï¼Œè®°å½•ä¸€ä¸‹
  41   5                          if (keyValue == '+' || keyValue == '-')
  42   5                          {
  43   6                              operator= keyValue;
  44   6                          }
  45   5                          // å¦‚æžœåˆ°è¿™æ—¶å€™å·¦æ“ä½œæ•°è¿˜æ˜¯0ï¼Œå°±æ¸…å±è¾“å‡ºä¸€ä¸ª0
  46   5                          // ï¼ˆè¦ä¹ˆæŒ‰äº†0ï¼Œè¦ä¹ˆæŒ‰äº†æ“ä½œæ•°ï¼Œç»“æžœéƒ½ä¸€æ ·ï¼‰
  47   5                          if (leftOperand == 0)
  48   5                          {
  49   6                              LCD1602_Init();
  50   6                              LCD1602_char(0, 0, '0');
  51   6                              index = 1; // å…‰æ ‡å‰ç§»åˆ°1
  52   6                          }
  53   5                          // å…¶ä»–æƒ…å†µå°±ç…§å¸¸è¾“å‡º
C51 COMPILER V9.60.0.0   MAIN                                                              03/25/2022 17:21:48 PAGE 2   

  54   5                          else
  55   5                          {
  56   6                              LCD1602_char(0, index++, keyValue);
  57   6                          }
  58   5                      }
  59   4                      // å¦‚æžœæŒ‰ä¸‹è¿‡æ“ä½œæ•°ï¼ˆ+/-ï¼‰
  60   4                      else
  61   4                      {
  62   5                          // æ˜¯æ•°å­—çš„è¯å°±æ˜¯å³æ“ä½œæ•°
  63   5                          if (keyValue >= '0' && keyValue <= '9')
  64   5                          {
  65   6                              // ç®—ä¸€ä¸‹
  66   6                              rightOperand = rightOperand * 10 + keyValue - '0';
  67   6                          }
  68   5      
  69   5                          if (rightOperand == 0)
  70   5                          {
  71   6                              // !è¿™é‡Œå¯ä»¥åŠ ä¸ªåˆ¤æ–­æœ‰æ²¡æœ‰è¾“å‡ºå¤šä½™çš„0ï¼Œä¸ç®¡äº†ï¼Œæ‘†çƒ‚äº†ï¼Œå
             -æ­£ä¸å½±å“è®¡ç®—
  72   6                          }
  73   5                          // å¦‚æžœæ˜¯æ“ä½œç¬¦
  74   5                          if (keyValue == '+' || keyValue == '-')
  75   5                          {
  76   6                              // ï¼ˆå½“ä½œéžæ³•æ“ä½œï¼Œå•¥ä¹Ÿä¸å¹²ï¼‰
  77   6                          }
  78   5                          LCD1602_char(0, index++, keyValue);
  79   5                      }
  80   4                  }
  81   3      
  82   3                  // è®¡ç®—ç­”æ¡ˆ
  83   3                  if (keyValue == '=')
  84   3                  {
  85   4                      // ç¬¬äºŒè¡Œï¼Œå…ˆè¾“å‡ºç­‰äºŽå·
  86   4                      LCD1602_char(1, 0, '=');
  87   4      
  88   4                      // æ²¡æœ‰å†™æ›´å¤šä½çš„å‡½æ•°ï¼Œå°±è¾“å‡ºä¸¤ä½å§ï¼Œå½»åº•æ‘†çƒ‚äº†å±žäºŽæ˜¯
  89   4                      if (operator== '+')
  90   4                          LCD1602_2num(1, 1, leftOperand + rightOperand);
  91   4      
  92   4                      // å¤§å°ä¹Ÿä¸åˆ¤æ–­äº†ï¼Œçˆ±é”™é”™å§
  93   4                      if (operator== '-')
  94   4                          LCD1602_2num(1, 1, leftOperand - rightOperand);
  95   4                  }
  96   3      
  97   3                  // æ¸…å±
  98   3                  if (keyValue == 'C')
  99   3                  {
 100   4                      LCD1602_Init();
 101   4      
 102   4                      // æ•°æ®åˆå§‹åŒ–
 103   4                      index = 0;        // å½“å‰å…‰æ ‡ä½ç½®
 104   4                      leftOperand = 0;  // å·¦æ“ä½œæ•°
 105   4                      rightOperand = 0; // å³æ“ä½œæ•°
 106   4                      operator= ' ';     // æ“ä½œç¬¦
 107   4                  }
 108   3              }
 109   2          }
 110   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    278    ----
C51 COMPILER V9.60.0.0   MAIN                                                              03/25/2022 17:21:48 PAGE 3   

   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
