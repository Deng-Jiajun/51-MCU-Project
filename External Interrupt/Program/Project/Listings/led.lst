C51 COMPILER V9.60.0.0   LED                                                               03/18/2022 10:03:37 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Objects\led.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Source\led.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\led.lst) TABS(2) OBJECT(.\Objects\led.obj)

line level    source

   1          #include <reg51.h>
   2          #include "led.h"
   3          #include "delay.h"
   4          
   5          // LED 连到 P0 端口
   6          #define PORT P0
   7          
   8          // PORT 端口连 8 个 LED
   9          sbit LED0 = PORT ^ 0;
  10          sbit LED1 = PORT ^ 1;
  11          sbit LED2 = PORT ^ 2;
  12          sbit LED3 = PORT ^ 3;
  13          sbit LED4 = PORT ^ 4;
  14          sbit LED5 = PORT ^ 5;
  15          sbit LED6 = PORT ^ 6;
  16          sbit LED7 = PORT ^ 7;
  17          
  18          // 打开对应序号的灯
  19          void TurnOnLED(unsigned char index)
  20          {
  21   1          switch (index)
  22   1          {
  23   2          case 0:
  24   2              LED0 = 0;
  25   2              break;
  26   2          case 1:
  27   2              LED1 = 0;
  28   2              break;
  29   2          case 2:
  30   2              LED2 = 0;
  31   2              break;
  32   2          case 3:
  33   2              LED3 = 0;
  34   2              break;
  35   2          case 4:
  36   2              LED4 = 0;
  37   2              break;
  38   2          case 5:
  39   2              LED5 = 0;
  40   2              break;
  41   2          case 6:
  42   2              LED6 = 0;
  43   2              break;
  44   2          case 7:
  45   2              LED7 = 0;
  46   2              break;
  47   2          }
  48   1      }
  49          
  50          // 关闭对应序号的灯
  51          void TurnOffLED(unsigned char index)
  52          {
  53   1          switch (index)
  54   1          {
C51 COMPILER V9.60.0.0   LED                                                               03/18/2022 10:03:37 PAGE 2   

  55   2          case 0:
  56   2              LED0 = 1;
  57   2              break;
  58   2          case 1:
  59   2              LED1 = 1;
  60   2              break;
  61   2          case 2:
  62   2              LED2 = 1;
  63   2              break;
  64   2          case 3:
  65   2              LED3 = 1;
  66   2              break;
  67   2          case 4:
  68   2              LED4 = 1;
  69   2              break;
  70   2          case 5:
  71   2              LED5 = 1;
  72   2              break;
  73   2          case 6:
  74   2              LED6 = 1;
  75   2              break;
  76   2          case 7:
  77   2              LED7 = 1;
  78   2              break;
  79   2          }
  80   1      }
  81          
  82          // 逐位亮灭法
  83          void BitByBit(void)
  84          {
  85   1          // 陆续亮灭
  86   1          LED0 = 0;
  87   1          DelayXms(100);
  88   1          LED0 = 1;
  89   1      
  90   1          LED1 = 0;
  91   1          DelayXms(100);
  92   1          LED1 = 1;
  93   1      
  94   1          LED2 = 0;
  95   1          DelayXms(100);
  96   1          LED2 = 1;
  97   1      
  98   1          LED3 = 0;
  99   1          DelayXms(100);
 100   1          LED3 = 1;
 101   1      
 102   1          LED4 = 0;
 103   1          DelayXms(100);
 104   1          LED4 = 1;
 105   1      
 106   1          LED5 = 0;
 107   1          DelayXms(100);
 108   1          LED5 = 1;
 109   1      
 110   1          LED6 = 0;
 111   1          DelayXms(100);
 112   1          LED6 = 1;
 113   1      
 114   1          LED7 = 0;
 115   1          DelayXms(100);
 116   1          LED7 = 1;
C51 COMPILER V9.60.0.0   LED                                                               03/18/2022 10:03:37 PAGE 3   

 117   1      }
 118          
 119          // 数组控制法
 120          // 对应某位 0
 121          unsigned char LED_DATA[8] = {0xfe, 0xfd, 0xfb, 0xf7, 0xef, 0xdf, 0xbf, 0x7f};
 122          void ArrayControl(void)
 123          {
 124   1          unsigned char i;
 125   1          for (i = 0; i < 8; i++)
 126   1          {
 127   2              PORT = LED_DATA[i];
 128   2              DelayXms(100);
 129   2          }
 130   1      }
 131          
 132          // 逐位移位法
 133          void BitShift(void)
 134          {
 135   1          unsigned char temp = 0xfe; // 1111 1110
 136   1          unsigned char i = 0;
 137   1          for (; i < 8; i++)
 138   1          {
 139   2              PORT = temp;
 140   2              temp = (temp << 1) + 1; // 1111 1101 （+1 是因为低位补的是 0）
 141   2              DelayXms(100);
 142   2          }
 143   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    284    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
