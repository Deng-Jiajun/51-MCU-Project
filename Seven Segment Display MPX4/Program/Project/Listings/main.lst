C51 COMPILER V9.60.0.0   MAIN                                                              03/11/2022 23:32:02 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Source\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg51.h>
   2          
   3          // å»¶è¿Ÿå‡½æ•°
   4          void DelayXms(unsigned char ms) // å»¶æ—¶ xms
   5          {
   6   1          unsigned int i, j;
   7   1          for (i = 0; i < ms; i++)
   8   1          {
   9   2              // å®Œæ•´å¾ªçŽ¯å®Œæ˜¯ 1000 æ¬¡ï¼Œå³ 1ms
  10   2              for (j = 0; j < 333; j++)
  11   2                  ; // ç©ºæŒ‡ä»¤
  12   2          }
  13   1      }
  14          
  15          // é˜³æž 0~9
  16          unsigned char SEG_NUMERAL_DATA_COMMON_ANODE[10] = {0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8, 0x80, 0
             -x90};
  17          
  18          // æŸä¸€ä½
  19          unsigned char SEG_DIGIT[4] = {0xFE, 0xFD, 0xFB, 0xF7};
  20          
  21          void CommonAnodeSegmentDisplayMPX4ShowNumber(unsigned int num)
  22          {
  23   1          unsigned char i;
  24   1          unsigned int j[4] = {1000, 100, 10, 1};
  25   1      
  26   1          for (i = 0; i < 4; ++i)
  27   1          {
  28   2              // è¿™é‡Œç”¨ pow ä¼šå‡ºçŽ°å¥‡æ€ªçš„é”™è¯¯ï¼Œå•æ­¥è°ƒè¯•äº†ä¸€ä¸‹ä¹Ÿæ²¡è§£å†³ï¼Œæš‚æ—¶æ”¾å¼ƒäº†
  29   2              // å®žé™…ä¸Šå› ä¸ºä½æ•°å›ºå®šï¼Œç”¨æ•°å­—å’Œ powï¼Œæœ‰ç¼–è¯‘ä¼˜åŒ–çš„è¯ï¼Œå¾—åˆ°çš„åº”è¯¥æ˜¯ä¸€æ
             - ·çš„ç»“æžœ
  30   2              P1 = SEG_NUMERAL_DATA_COMMON_ANODE[num / j[i] % 10];
  31   2      
  32   2              P2 = SEG_DIGIT[i];
  33   2      
  34   2              DelayXms(20);
  35   2      
  36   2              // äº®5æ¯«ç§’ï¼Œç„¶åŽæ®µç å’Œä½é€‰ç éƒ½é‡ç½®
  37   2              P1 = 0xFF; // æ¶ˆå½±
  38   2              P2 = 0xFF; // å…³ä½
  39   2          }
  40   1      }
  41          
  42          /**
  43           * é»˜è®¤æ˜¾ç¤º 0000~9999 å¾ªçŽ¯
  44           * æŒ‰é”®1 æ˜¾ç¤º 1234
  45           * æŒ‰é”®2 æ˜¾ç¤º 5678
  46           * æŒ‰é”®3 æ¢å¤æ˜¾ç¤º 0000~9999 å¾ªçŽ¯
  47           */
  48          
  49          // 3 ä¸ªæŒ‰é”®
  50          sbit KEY1 = P3 ^ 0;
  51          sbit KEY2 = P3 ^ 1;
  52          sbit KEY3 = P3 ^ 2;
C51 COMPILER V9.60.0.0   MAIN                                                              03/11/2022 23:32:02 PAGE 2   

  53          
  54          void main(void)
  55          {
  56   1      
  57   1          unsigned int num = 0;
  58   1          unsigned int count = 0;
  59   1          bit isDefault = 1; // æ˜¯å¦é»˜è®¤æ˜¾ç¤ºï¼ˆ0000~9999ï¼‰ï¼Œæ²¡æœ‰ boolï¼Œåªå¥½ç”¨ bit
  60   1      
  61   1          while (1)
  62   1          {
  63   2      
  64   2              if (KEY1 == 0)
  65   2              {
  66   3                  DelayXms(10); // å»¶è¿Ÿæ£€æµ‹
  67   3                  if (KEY1 == 0)
  68   3                  {
  69   4                      // éœ€è¦ç­‰å¾…æŒ‰é”®æ¾å¼€æ˜¯å› ä¸ºå¦‚æžœæŒ‰ä¸‹çš„æ—¶é—´è¿‡é•¿ï¼Œä¼šè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªçŽ¯
             -ï¼Œé‡å¤è¿™ä¸ªæ“ä½œï¼Œè€Œè¿™å’Œè®¾è®¡é€»è¾‘å¯èƒ½æ˜¯ç›¸æ‚–çš„
  70   4                      while (KEY1 == 0)
  71   4                          ;              // ç­‰å¾…æŒ‰é”®æ¾å¼€ï¼ˆKEY1 å˜ä¸º 1ï¼‰
  72   4                      num = 1234;        // æ˜¾ç¤º 1234
  73   4                      isDefault = 0; // å…³é—­é»˜è®¤æ˜¾ç¤º
  74   4                  }
  75   3              }
  76   2              if (KEY2 == 0)
  77   2              {
  78   3                  DelayXms(10);
  79   3                  if (KEY2 == 0)
  80   3                  {
  81   4                      while (KEY2 == 0)
  82   4                          ;
  83   4                      num = 4567;        // æ˜¾ç¤º 4567
  84   4                      isDefault = 0; // å…³é—­é»˜è®¤æ˜¾ç¤º
  85   4                  }
  86   3              }
  87   2              if (KEY3 == 0)
  88   2              {
  89   3                  DelayXms(10);
  90   3                  if (KEY3 == 0)
  91   3                  {
  92   4                      while (KEY3 == 0)
  93   4                          ;
  94   4                      isDefault = 1; // æ¢å¤æ˜¾ç¤º0000~9999
  95   4                  }
  96   3              }
  97   2      
  98   2              if (isDefault)
  99   2              {
 100   3                  // é»˜è®¤æ˜¾ç¤º 0000~9999
 101   3                  num = count++;
 102   3      
 103   3                  // è¶…è¿‡èŒƒå›´æ—¶å½’ 0ï¼›
 104   3                  if (count == 10000)
 105   3                      count = 0;
 106   3              }
 107   2      
 108   2              CommonAnodeSegmentDisplayMPX4ShowNumber(num);
 109   2          }
 110   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.60.0.0   MAIN                                                              03/11/2022 23:32:02 PAGE 3   

   CODE SIZE        =    241    ----
   CONSTANT SIZE    =      8    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     14      15
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
